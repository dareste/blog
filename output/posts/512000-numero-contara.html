<!DOCTYPE html>
<html lang="es">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="Entre Dev Y Ops">
<title>512000 es el número que se contará... | Entre Dev Y Ops</title>
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/edyo.css" rel="stylesheet" type="text/css">
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<meta name="twitter:card" content="summary">
<meta name="og:url" content="http://www.entredevyops.es/posts/512000-numero-contara.html">
<meta name="twitter:site:id" content="370552857">
<meta name="og:title" content="512000 es el número que se contará...">
<meta name="og:description" content="...y el número de la cuenta será 512000.
Hecho el obligatorio homenaje a la Santa Granada de Antioquía de los Monty Python, pongámonos serios y veamos por qué dedicamos un artículo a este número.
¿Os ">
</head>
<body>

<div id="wrap">

    <!-- Menubar -->

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://www.entredevyops.es/">Entre Dev Y Ops</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav navbar-right" id="main-navbar">
<li>
<a href="../tags/index.html"><i class="fa fa-tags"></i> Etiquetas</a>
                </li>
<li>
<a href="../archive.html"><i class="fa fa-archive"></i> Archivo</a>
                </li>
<li>
<a href="../podcast.html"><i class="fa fa-microphone"></i> Podcast</a>
                </li>
<li>
<a href="../acerca-de.html"><i class="fa fa-info-circle"></i> Acerca de...</a>

                        </li>
<li id="search-button"><a href="#" class="fa fa-search"></a></li>
                        </ul>
<form method="get" role="search" id="search" action="https://google.es/search" class="nav navbar-form">
<input type="hidden" name="as_sitesearch" value="http://www.entredevyops.es/"><input type="text" name="q" maxlength="255" placeholder="Buscar..." class="form-control"><input type="submit" value="Buscar">
</form>
                
            </div>
<!-- /.navbar-collapse -->
        </div>
    </nav><!-- End of Menubar --><div class="container">
        <div class="body-content">
            <!--Body content-->
    <article class="postbox clearfix"><h1 class="p-name" itemprop="headline name">512000 es el número que se contará...</h1>

            <ul class="pager">
<li class="previous">
        <a href="11-cosas-necesitas-saber-devops-10.html" title="11 cosas sobre DevOps (10): Mi segundo patrón DevOps favorito" rel="prev">Post anterior</a>
        </li>
        <li class="next">
            <a href="CAS2014-CfP-y-early-birds.html" title="Conferencia Agile Spain 2014, en Barcelona en Diciembre" rel="next">Siguiente post</a>
        </li>
    </ul>
<div class="meta">
            <small>
                por <span class="author">Daniel Aresté</span>
                el <time class="published" datetime="2014-08-13T20:30:00+02:00">13/08/2014</time>
                
                en     <span itemprop="keywords">
        <a class="tag p-category" href="../tags/cronica.html"><span class="badge badge-info">Crónica</span></a>
        <a class="tag p-category" href="../tags/redes.html"><span class="badge badge-info">Redes</span></a>
    </span>

            </small>
        </div>
        <p>...y el número de la cuenta será 512000.</p>
<p>Hecho el obligatorio homenaje a la <a class="reference external" href="https://www.youtube.com/watch?v=MPzWtI6uaJk&amp;t=2m16s">Santa Granada de Antioquía</a> de los Monty Python, pongámonos serios y veamos por qué dedicamos un artículo a este número.</p>
<p>¿Os iba mal Internet ayer? No estabais solos. En algún momento de la mañana empezaron a haber problemas graves en la mayoría de los ISPs de todo el mundo, que afectaron tanto a empresas como a particulares.</p>
<p>El mundo de la tecnología está lleno de ejemplos de diseños que, o bien por limitaciones del momento, o bien por no imaginar crecimientos exponenciales, provocan problemas de escalabilidad en el futuro; algunos de los más conocidos son el <strong>efecto 2000</strong> o el <strong>agotamiento de direcciones IPv4</strong>. A esta lista de umbrales superados ya podemos añadir uno nuevo: ayer, por primera vez en la historia, se superaron las <strong>512000 entradas en la tabla de rutas de Internet</strong>.</p>
<p>No obstante, antes de seguir hablando de dicha tabla necesitamos hablar de cómo está organizado Internet.</p>
<!-- TEASER_END -->
<div class="section" id="sistemas-autonomos">
<h2>Sistemas Autónomos</h2>
<p>Internet está administrativamente segmentado en Sistemas Autónomos (AS), que son en esencia entidades que agrupan prefijos IP públicos y los anuncian al resto del mundo. Aunque cualquiera puede <a class="reference external" href="http://www.ripe.net/lir-services/resource-management/allocations-and-assignments/request-an-as-number">solicitar un AS</a>, los grandes propietarios son empresas u organizaciones cuya actividad central o negocio tiene que ver con la presencia en Internet. Así, estaríamos hablando de ISPs o grandes compañías como Google o Amazon.</p>
<p><a class="reference external" href="http://bgp.he.net/">Aquí</a> puedes obtener información del AS de tu ISP, así como de los prefijos IP de los cuales es propietario el mismo. En este <a class="reference external" href="http://bgp.he.net/search?search%5Bsearch%5D=google&amp;commit=Search">otro ejemplo</a> verás la lista de AS y prefijos IP propiedad de Google.</p>
</div>
<div class="section" id="la-tabla-de-rutas-de-internet">
<h2>La tabla de rutas de Internet</h2>
<p>Los AS interconectan unos con otros creando un gigantesco <a class="reference external" href="http://es.wikipedia.org/wiki/Grafo">grafo</a> donde cada AS es un nodo. Para que podáis vislumbrar la complejidad del conjunto, en este <a class="reference external" href="http://bgp.he.net/AS8075#_graph4">ejemplo</a> tenéis el subgrafo de cómo uno de los AS de Microsoft (izquierda, AS8075) interconecta con sus vecinos más cercanos. Os dejo el ejercicio de intentar imaginar el grafo completo sabiendo que el número actual de ASes registrados supera los 80.000.</p>
<p>Internet funciona porque somos capaces de mover información entre dos AS cualesquiera (por ejemplo, el de tu ISP y el de Google cuando consultas tu correo en Gmail). A esto se le llama enrutamiento, y funciona gracias a que cada uno de los AS dispone de un mapa o tabla de rutas que le indica cómo comunicar con cualquier otro nodo. Así, no existe una sola tabla de rutas de Internet, sino tantas como ASes. Las tablas se mantienen al día gracias al protocolo <a class="reference external" href="http://es.wikipedia.org/wiki/Border_Gateway_Protocol">BGP</a>, que esencialmente intercambia información con los AS vecinos para estar al día de cambios topológicos (recordad que los AS están en manos privadas, que tienen potestad para realizar cambios en cualquier momento) y crear, modificar o eliminar entradas en la tabla.</p>
<p>Dos vecinos tendrán tablas de rutas similares, mientras que las de dos ASes en extremos opuestos del planeta diferirán completamente. No obstante, lo que sí es más o menos parecido es su tamaño, que viene creciendo casi <a class="reference external" href="http://www.cidr-report.org/cgi-bin/plota?file=%2fvar%2fdata%2fbgp%2fas2.0%2fbgp-active%2etxt&amp;descr=Active%20BGP%20entries%20%28FIB%29&amp;ylabel=Active%20BGP%20entries%20%28FIB%29&amp;with=step">exponencialmente</a> desde los 90 y que ayer por primera vez superó los 512.000 prefijos de media.</p>
</div>
<div class="section" id="el-numero-maldito">
<h2>El número maldito</h2>
<p>Ya por fin tenemos todo lo necesario para explicar qué pasó ayer. Los chicos de bgpmon.net tienen un <a class="reference external" href="http://www.bgpmon.net/what-caused-todays-internet-hiccup/">análisis</a> técnico excelente que aquí resumiremos.</p>
<p>Ayer, a las 7:48 de la mañana, el ISP Verizon anunció (parece ser que por un error de configuración) <strong>15.000 nuevos prefijos</strong> a través de dos de sus AS. Inmediatamente, estas entradas empezaron a propagarse por el resto de Internet, provocando un tamaño medio de tabla de 513.000 registros.</p>
<p>Aunque esto no es problema para los AS que disfrutan de hardware más moderno, los routers más viejos no pudieron con esto. Por ejemplo, el veterano router <a class="reference external" href="http://www.cisco.com/c/en/us/products/switches/catalyst-6500-series-switches/literature.html">Cisco 6500</a> es un tanque que podemos encontrar en cientos de ASes, pero que por defecto <strong>no permite cargar más de 512.000 prefijos</strong> en memoria y deja el dispositivo inconsistente al alcanzar ese límite.</p>
<p>Cisco ofrecía <a class="reference external" href="http://www.cisco.com/c/en/us/support/docs/switches/catalyst-6500-series-switches/117712-problemsolution-cat6500-00.html">una solución</a> para incrementar ese tamaño a un millón, pero implicaba reiniciar el router. Muchos de los administradores de red se afanaron en aplicarla en sus viejos routers, pero siendo en muchos casos hardware que llevaba años sin reiniciarse, había <strong>defectos ocultos</strong> en discos o memorias de arranque que hicieron que el equipo <strong>no sobreviviera al reinicio</strong>. Eso acentuó los problemas.</p>
<p>Por suerte, Verizon corrigió rápido su error y esos prefijos fueron retirados, con lo cual la tabla de rutas volvió a su tamaño habitual. Aunque es inevitable que la tabla alcance de nuevo los 512.000 registros, esperemos que este pequeño susto haya hecho reaccionar a los administradores de red afectados y modernicen su infraestructura.</p>
<p>Internet, tan robusto y a la vez tan frágil...</p>
</div>
    </article><div class="pager row">
        <div class="previous col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <div>Post anterior</div>
            <a href="11-cosas-necesitas-saber-devops-10.html" rel="prev">11 cosas sobre DevOps (10): Mi segundo patrón DevOps favorito</a>
        </div>
        <div class="next col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <div>Siguiente post</div>
            <a href="CAS2014-CfP-y-early-birds.html" rel="next">Conferencia Agile Spain 2014, en Barcelona en Diciembre</a>
        </div>
    </div>

                    <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="edyo",
            disqus_url="http://www.entredevyops.es/posts/512000-numero-contara.html",
        disqus_title="512000 es el n\u00famero que se contar\u00e1...",
        disqus_identifier="cache/posts/2014-08-13-dareste-512000-es-el-numero-que-se-contara.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>JavaScript debe estar activado para ver los <a href="http://disqus.com/?ref_noscript" rel="nofollow">comentarios con Disqus.</a>
</noscript>
    <a href="http://disqus.com" class="dsq-brlink" rel="nofollow">Comentarios con <span class="logo-disqus">Disqus</span></a>


    
            <!--End of body content-->
        </div>
    </div>

</div>

<footer><div class="container">
        Suscríbete a nuestro <a href="http://www.entredevyops.es/rss.xml">RSS <i class="fa fa-rss"></i></a> o síguenos en <a href="https://twitter.com/entredevyops">Twitter <i class="fa fa-twitter"></i></a><br>© 2017 Entre Dev Y Ops por los <a href="http://www.entredevyops.es/acerca-de.html#authors">autores</a> bajo <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.es_ES">Licencia <img alt="Licencia Creative Commons" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" height="15px" width="80px"></a> — Powered by <a href="http://getnikola.com">Nikola</a>
    </div>
</footer><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script><script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script><script src="../assets/js/jquery.colorbox-min.js" type="text/javascript"></script><script>
        $( "#search-button" ).click(toggle_search);
        function toggle_search() {
            $('#main-navbar').children().each(
                function() {
                    if ($(this).attr('id') != 'search-button') {
                        console.log($(this).attr('id'));
                        $(this).toggle();
                    };
                }
            );
            $( "#search" ).toggle();
        }
    </script><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-25613214-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
