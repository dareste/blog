{#  -*- coding: utf-8 -*- #}
{% import 'index_helper.tmpl' as helper with context %}
{% import 'post_helper.tmpl' as post_helper with context %}
{% import 'comments_helper.tmpl' as comments with context %}
{% extends 'base.tmpl' %}
{% block content %}
    {% for post in posts %}
        <article class="postbox clearfix h-entry">
            <h1 class="p-name"><a href="{{ post.permalink() }}" class="u-url">{{ post.title() }}</a></h1>
            <div class="meta">
                <small>
                    {% if post.meta('author') %}
                        {{ messages("by") }} <span class="author">{{ post.meta('author') }}</span>
                    {% endif %}
                    {{ messages("at") }} <time class="published dt-published" datetime="{{ post.date.isoformat() }}">{{ post.formatted_date(date_format) }}</time>
                    {{ post_helper.html_translations(post) }}
                    {{ messages("in") }} {{ post_helper.html_tags(post) }}
                </small>
            </div>
            {% if index_teasers %}
            <div class="p-summary">
                {{ post.text(teaser_only=True) }}
            {% else %}
            <div class="e-content">
                {{ post.text(teaser_only=False) }}
            {% endif %}
            </div>
            {% if not post.meta('nocomments') %}
                {{ comments.comment_link(post.permalink(), post._base_path) }}
            {% endif %}
        </article>
    {% endfor %}
    {{ helper.html_pager() }}
    {{ comments.comment_link_script() }}
    {{ helper.mathjax_script(posts) }}
{% endblock %}
